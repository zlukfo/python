# Проектирование приложения

## Практическая задача
Необходимо написать приложение которое импортирует данные в списки/хранилища Б24

## Описание бизнес-логики
На естественном языке нужно описать что должно делать приложение
- получать структуру списка/хранилища
- читать импортируемые данные
- сопоставить структуру списка/хранилища и импортируемые данные
- загружать данные в список/хранилище

## Проектирование структуры приложения
Выделяем слои приложения
- пользовательский интерфейс
- взаимодействие с Б24
- получить правила сопоставения данных
- взаимодейтсвие с источником данных

На основании слоев проектируем  структуру файлов
- **import** - исполняемый файл, который выполняет импорт данных
- **source.py** - файл получения входных параметров
- **b24.py** - файл взаимодейтсвия с Б24
- **rules.py** - файл правил сопоставления данных
- **data.py** - файл взаимодействия с инсточником данных

## Проектируем бизнес-логику пользоватаельского приложения
Что там нужно сделать (псевдокод)
``` python
#!/usr/bin/env python3.10
from b24 import get_structure
from data import get_data
from rules set_rules
from source import get_params

def import_data(rules):
    return 1

def main():
    # получили входные парамеры источника данных и куда импортироват
    table, data = get_params()
    # получили структуру цели
    b24_structure, RULE = get_structure(table)
    # получили импортируемые данные
    data = get_data(data)
    # установили правила дял импорта между источником и целью
    rules = set_rules(b24_structure, data, RULE)    # RULE - правило о том, как нужно проводить сопоставление (определяется структурой в котруюудем проводить импорт)
    # импортировали данные
    import_data(rules)

if __name__ == "__main__":
    main()

```
По классике при проектировании выделяют три слоя
- слой базы данных
- слой бизнес-логики
- слой визуализации

у нас
- сдой бд: get_structure(), get_data()
- слой бизнес-логики: set_rules()
- слой визуализации: import_data()

задача - бизнес-логика не должна зависить от двух других слоев
как это реализуется
1. set_rules не имеет предсавления о том, как хранятся и какую структуру имеют импортируемые данные и куда нам эти данные нужно импортировать. Не имеет предсавления пока мы не сообщим ей об этом в агументах
2. с другой стороны set_rules ничего не сзнает о правилах сопоставления импортируемых данных в сущность импорта. Опять же не знает, пока мы ей об этом не скажем

самое время определить типы и структуру данных для источника, цели импрта и правил их сопоставления
